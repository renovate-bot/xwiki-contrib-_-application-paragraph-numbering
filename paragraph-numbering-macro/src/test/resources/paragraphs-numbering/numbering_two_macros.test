.runTransformations
.#-----------------------------------------------------
.input|xwiki/2.1
.# Test the macro when called twice, the second macro must continue its numbering when the first one ended.
.#-----------------------------------------------------
{{paragraphs-numbering}}
1. 1
11. 2
{{/paragraphs-numbering}}

Some content.

{{paragraphs-numbering}}
1. 3
{{/paragraphs-numbering}}
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<div style="--numbering-prefix: '';" id="generated-id" class="numbered-lists"><style>
#generated-id > .numbered-lists-edit > .xwiki-metadata-container > ol:not(.skip-numbering):first-of-type {
  counter-reset: numbering 0;
}
</style><div class="numbered-lists-view"><ol><li id="P1" data-numbering="1">1<ol><li id="P1.1" data-numbering="1.1">2</li></ol></li></ol></div><div class="numbered-lists-edit"><ol><li>1<ol><li>2</li></ol></li></ol></div></div><p>Some content.</p><div style="--numbering-prefix: '';" id="generated-id" class="numbered-lists"><style>
#generated-id > .numbered-lists-edit > .xwiki-metadata-container > ol:not(.skip-numbering):first-of-type {
  counter-reset: numbering 1;
}
</style><div class="numbered-lists-view"><ol><li id="P2" data-numbering="2">3</li></ol></div><div class="numbered-lists-edit"><ol><li>3</li></ol></div></div>
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginMacroMarkerStandalone [paragraphs-numbering] [] [1. 1
11. 2]
beginGroup [[class]=[numbered-lists][id]=[generated-id][style]=[--numbering-prefix: '';]]
onRawText [<style>
#generated-id > .numbered-lists-edit > .xwiki-metadata-container > ol:not(.skip-numbering):first-of-type {
  counter-reset: numbering 0;
}
</style>] [xhtml/1.0]
beginGroup [[class]=[numbered-lists-view]]
beginList [NUMBERED]
beginListItem [[data-numbering]=[1][id]=[P1]]
onWord [1]
beginList [NUMBERED]
beginListItem [[data-numbering]=[1.1][id]=[P1.1]]
onWord [2]
endListItem [[data-numbering]=[1.1][id]=[P1.1]]
endList [NUMBERED]
endListItem [[data-numbering]=[1][id]=[P1]]
endList [NUMBERED]
endGroup [[class]=[numbered-lists-view]]
beginGroup [[class]=[numbered-lists-edit]]
beginMetaData [[non-generated-content]=[java.util.List<org.xwiki.rendering.block.Block>]]
beginList [NUMBERED]
beginListItem
onWord [1]
beginList [NUMBERED]
beginListItem
onWord [2]
endListItem
endList [NUMBERED]
endListItem
endList [NUMBERED]
endMetaData [[non-generated-content]=[java.util.List<org.xwiki.rendering.block.Block>]]
endGroup [[class]=[numbered-lists-edit]]
endGroup [[class]=[numbered-lists][id]=[generated-id][style]=[--numbering-prefix: '';]]
endMacroMarkerStandalone [paragraphs-numbering] [] [1. 1
11. 2]
beginParagraph
onWord [Some]
onSpace
onWord [content]
onSpecialSymbol [.]
endParagraph
beginMacroMarkerStandalone [paragraphs-numbering] [] [1. 3]
beginGroup [[class]=[numbered-lists][id]=[generated-id][style]=[--numbering-prefix: '';]]
onRawText [<style>
#generated-id > .numbered-lists-edit > .xwiki-metadata-container > ol:not(.skip-numbering):first-of-type {
  counter-reset: numbering 1;
}
</style>] [xhtml/1.0]
beginGroup [[class]=[numbered-lists-view]]
beginList [NUMBERED]
beginListItem [[data-numbering]=[2][id]=[P2]]
onWord [3]
endListItem [[data-numbering]=[2][id]=[P2]]
endList [NUMBERED]
endGroup [[class]=[numbered-lists-view]]
beginGroup [[class]=[numbered-lists-edit]]
beginMetaData [[non-generated-content]=[java.util.List<org.xwiki.rendering.block.Block>]]
beginList [NUMBERED]
beginListItem
onWord [3]
endListItem
endList [NUMBERED]
endMetaData [[non-generated-content]=[java.util.List<org.xwiki.rendering.block.Block>]]
endGroup [[class]=[numbered-lists-edit]]
endGroup [[class]=[numbered-lists][id]=[generated-id][style]=[--numbering-prefix: '';]]
endMacroMarkerStandalone [paragraphs-numbering] [] [1. 3]
endDocument